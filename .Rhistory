MainMod_Rich_sitecluster  <- feols(log(live_mass) ~ log(rich)  | newplotid + site.by.yeardummy, comb, cluster = "site_code")
MainMod_RichEven <- feols(log(live_mass) ~ log(rich) + ihs(even) | newplotid + site.by.yeardummy, comb)
MainMod_Simpson  <- feols(log(live_mass) ~ log(simpson) | newplotid + site.by.yeardummy, comb)
MainMod_RichLag  <- feols(log(live_mass) ~ log(rich) + log(laggedrich) | newplotid + site.by.yeardummy, comb)
MainMod_RichEvenLag <- feols(log(live_mass) ~ log(rich) + log(laggedrich) + ihs(even) | newplotid + site.by.yeardummy, comb)
Fig2A.1 <- tidy(MainMod_Rich) %>%
filter(term == "log(rich)")
Fig2A.2 <- tidy(MainMod_RichEven) %>%
filter(term == "log(rich)")
Fig2A.3 <- tidy(MainMod_Simpson) %>%
filter(term == "log(simpson)")
MixedMod_Rich <- lmer(log(live_mass) ~ log(rich) + as.factor(country) + as.factor(habitat) + as.factor(year) +
elevation + managed + burned + grazed + anthropogenic +
TEMP_VAR_v2 + MIN_TEMP_v2 + MAX_TEMP_v2 + TEMP_WET_Q_v2 + TEMP_DRY_Q_v2 + TEMP_WARM_Q_v2 + TEMP_COLD_Q_v2 +
pct_C + pct_N + ppm_P + ppm_K + ppm_Na + ppm_Mg + ppm_S + ppm_Na + ppm_Zn + ppm_Mn + ppm_Fe + ppm_Cu + ppm_B +
pH + PercentSand + PercentSilt + PercentClay +
(1|newplotid) + (1|site_code), comb, REML = F)
MixedMod_RichEven <- lmer(log(live_mass) ~ log(rich) + ihs(even) + as.factor(country) + as.factor(habitat) + as.factor(year) +
elevation + managed + burned + grazed + anthropogenic +
TEMP_VAR_v2 + MIN_TEMP_v2 + MAX_TEMP_v2 + TEMP_WET_Q_v2 + TEMP_DRY_Q_v2 + TEMP_WARM_Q_v2 + TEMP_COLD_Q_v2 +
pct_C + pct_N + ppm_P + ppm_K + ppm_Na + ppm_Mg + ppm_S + ppm_Na + ppm_Zn + ppm_Mn + ppm_Fe + ppm_Cu + ppm_B +
pH + PercentSand + PercentSilt + PercentClay +
(1|newplotid) + (1|site_code), comb, REML = F)
MixedMod_Simpson <- lmer(log(live_mass) ~ log(simpson) + as.factor(country) + as.factor(habitat) + as.factor(year) +
elevation + managed + burned + grazed + anthropogenic +
TEMP_VAR_v2 + MIN_TEMP_v2 + MAX_TEMP_v2 + TEMP_WET_Q_v2 + TEMP_DRY_Q_v2 + TEMP_WARM_Q_v2 + TEMP_COLD_Q_v2 +
pct_C + pct_N + ppm_P + ppm_K + ppm_Na + ppm_Mg + ppm_S + ppm_Na + ppm_Zn + ppm_Mn + ppm_Fe + ppm_Cu + ppm_B +
pH + PercentSand + PercentSilt + PercentClay +
(1|newplotid) + (1|site_code), comb, REML = F)
SimpleRE_TwoVar <- lmer(log(live_mass) ~ log(rich) + as.factor(year) + (1|newplotid), comb, REML = F)
SimpleRE_MultiVar <- lmer(log(live_mass) ~ log(rich) + as.factor(country) + as.factor(habitat) + as.factor(year) +
elevation + managed + burned + grazed + anthropogenic +
TEMP_VAR_v2 + MIN_TEMP_v2 + MAX_TEMP_v2 + TEMP_WET_Q_v2 + TEMP_DRY_Q_v2 + TEMP_WARM_Q_v2 + TEMP_COLD_Q_v2 +
pct_C + pct_N + ppm_P + ppm_K + ppm_Na + ppm_Mg + ppm_S + ppm_Na + ppm_Zn + ppm_Mn + ppm_Fe + ppm_Cu + ppm_B +
pH + PercentSand + PercentSilt + PercentClay +
(1|newplotid), comb, REML = F)
Fig2B.1 <- tidy(MixedMod_Rich) %>%
filter(term == "log(rich)")
Fig2B.2 <- tidy(MixedMod_RichEven) %>%
filter(term == "log(rich)")
Fig2B.3 <- tidy(MixedMod_Simpson) %>%
filter(term == "log(simpson)")
Fig2B.1$conf.low <- .0049797
Fig2B.1$conf.high <- .7535313
Fig2B.2$conf.low <- -.0117337
Fig2B.2$conf.high <- .8204197
Fig2B.3$conf.low <- -.0855739
Fig2B.3$conf.high <- .2348401
Fig2B.data <-  bind_rows(
Fig2B.1 %>% mutate(reg = "Species Richness"),
Fig2B.2 %>% mutate(reg = "Species Richness controlling for Evenness"))
Fig2B.data$term = factor(Fig2B.data$term,
levels=c("log(rich)",
"ihs(even)"))
# Plot
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Common Design in Ecology",
caption = "", x = "Variable", y = "Estimated effect size"
)
## Master Palette
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "gray1", "red")
# Plot
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Common Design in Ecology",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2B.plot
ggsave("./output/Fig2B.pdf", Fig2B.plot)
source("./code/r/analysis_main.R") ## Produces Figures 2A, 2B, 3, and Tables S2, S3, and Figure S4
source("./code/r/analysis_main.R") ## Produces Figures 2A, 2B, 3, and Tables S2, S3, and Figure S4
source("./code/r/analysis_sm5.R") ## Produces Tables S4, S5, and S6
Fig2A.plot
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8),
labels = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.data <-  bind_rows(
Fig2A.1 %>% mutate(reg = "Species Richness"),
Fig2A.2 %>% mutate(reg = "Species Richness controlling for Evenness"))
Fig2A.data$term = factor(Fig2A.data$term,
levels=c("log(rich)",
"ihs(even)"))
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8),
labels = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-0.5,0,0.5),
labels = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
Fig2A.plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-0.5,0,0.5),
labels = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
labels = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-0.5,0,0.5)
) %>%
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
Fig2B.data <-  bind_rows(
Fig2B.1 %>% mutate(reg = "Species Richness"),
Fig2B.2 %>% mutate(reg = "Species Richness controlling for Evenness"))
Fig2B.data$term = factor(Fig2B.data$term,
levels=c("log(rich)",
"ihs(even)"))
# Plot
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Common Design in Ecology",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2B.plot
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness" , "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-0.5,0,0.5)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
ggsave("./output/Fig2A.pdf", Fig2A.plot)
################################################
## Plot Figure 2B
################################################
Fig2B.data <-  bind_rows(
Fig2B.1 %>% mutate(reg = "Species Richness"),
Fig2B.2 %>% mutate(reg = "Species Richness controlling for Evenness"))
Fig2B.data$term = factor(Fig2B.data$term,
levels=c("log(rich)",
"ihs(even)"))
# Plot
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Common Design in Ecology",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2B.plot
ggsave("./output/Fig2B.pdf", Fig2B.plot)
#################################
######## Combine 2A and 2B
common.ylab = ylab("Estimated effect size")  #Estimated % Change in Productivity from a 1% Change in Diversity
Fig2.both <- plot_grid(Fig2A.plot  + common.ylab,
Fig2B.plot + common.ylab)
Fig2.both
ggsave("./output/Fig2.pdf", Fig2.both, width=13, height=6)
source("./code/r/FiguresS1_S2_S3.R") #Produces Figures S1, S2 and S3
