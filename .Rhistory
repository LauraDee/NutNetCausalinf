geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10,2)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8, 1)
) %>%
labs(title = "Our Main Study Design",
caption = "", x = "Variable", y = "Estimate for log(species richness) effect size"
)
Fig2B.plot
cbPalette[c(8,3,10)]
# Plot
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "gray1", "red")
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8,)
) %>%
labs(title = "Our Main Study Design",
caption = "", x = "Variable", y = "Estimate for log(species richness) effect size"
)
Fig2B.plot
# Plot
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "gray1", "red")
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Our Main Study Design",
caption = "", x = "Variable", y = "Estimate for log(species richness) effect size"
)
Fig2B.plot
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Traditional Ecological Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2B.plot
MainMod_Rich     <- feols(log(live_mass) ~ log(rich)  | newplotid + site.by.yeardummy, comb)
MainMod_RichEven <- feols(log(live_mass) ~ log(rich) + ihs(even) | newplotid + site.by.yeardummy, comb)
MainMod_Simpson  <- feols(log(live_mass) ~ log(simpson) | newplotid + site.by.yeardummy, comb)
MainMod_RichLag  <- feols(log(live_mass) ~ log(rich) + log(laggedrich) | newplotid + site.by.yeardummy, comb)
MainMod_RichEvenLag <- feols(log(live_mass) ~ log(rich) + log(laggedrich) + ihs(even) | newplotid + site.by.yeardummy, comb)
##############################################
## Models for Figure 2B and Table S2 ETX XXX #
##############################################
varnames <- "live_mass rich even simpson newplotid site_code country habitat year elevation managed burned grazed anthropogenic TEMP_VAR_v2 MIN_TEMP_v2 MAX_TEMP_v2 TEMP_WET_Q_v2 TEMP_DRY_Q_v2 TEMP_WARM_Q_v2 TEMP_COLD_Q_v2 pct_C pct_N ppm_P ppm_K ppm_Na ppm_Mg ppm_S ppm_Na ppm_Zn ppm_Mn ppm_Fe ppm_Cu ppm_B pH PercentSand PercentSilt PercentClay"
vv <- unlist(strsplit(varnames," "))
for (i in 1:38) {
print(paste(i, grep(vv[i],names(ml_comb)), sep = " , "))
}
ml_comb <- as.data.frame(comb)
ml_comb <- ml_comb[,vv]
ml_comb <- ml_comb[complete.cases(ml_comb),]
## Run mixed models
MixedMod_Rich <- lmer(log(live_mass) ~ log(rich) + as.factor(country) + as.factor(habitat) + as.factor(year) +
elevation + managed + burned + grazed + anthropogenic +
TEMP_VAR_v2 + MIN_TEMP_v2 + MAX_TEMP_v2 + TEMP_WET_Q_v2 + TEMP_DRY_Q_v2 + TEMP_WARM_Q_v2 + TEMP_COLD_Q_v2 +
pct_C + pct_N + ppm_P + ppm_K + ppm_Na + ppm_Mg + ppm_S + ppm_Na + ppm_Zn + ppm_Mn + ppm_Fe + ppm_Cu + ppm_B +
pH + PercentSand + PercentSilt + PercentClay +
(1|newplotid) + (1|site_code), ml_comb, REML = F)
MixedMod_RichEven <- lmer(log(live_mass) ~ log(rich) + ihs(even) + as.factor(country) + as.factor(habitat) + as.factor(year) +
elevation + managed + burned + grazed + anthropogenic +
TEMP_VAR_v2 + MIN_TEMP_v2 + MAX_TEMP_v2 + TEMP_WET_Q_v2 + TEMP_DRY_Q_v2 + TEMP_WARM_Q_v2 + TEMP_COLD_Q_v2 +
pct_C + pct_N + ppm_P + ppm_K + ppm_Na + ppm_Mg + ppm_S + ppm_Na + ppm_Zn + ppm_Mn + ppm_Fe + ppm_Cu + ppm_B +
pH + PercentSand + PercentSilt + PercentClay +
(1|newplotid) + (1|site_code), ml_comb, REML = F)
MixedMod_Simpson <- lmer(log(live_mass) ~ log(simpson) + as.factor(country) + as.factor(habitat) + as.factor(year) +
elevation + managed + burned + grazed + anthropogenic +
TEMP_VAR_v2 + MIN_TEMP_v2 + MAX_TEMP_v2 + TEMP_WET_Q_v2 + TEMP_DRY_Q_v2 + TEMP_WARM_Q_v2 + TEMP_COLD_Q_v2 +
pct_C + pct_N + ppm_P + ppm_K + ppm_Na + ppm_Mg + ppm_S + ppm_Na + ppm_Zn + ppm_Mn + ppm_Fe + ppm_Cu + ppm_B +
pH + PercentSand + PercentSilt + PercentClay +
(1|newplotid) + (1|site_code), ml_comb, REML = F)
## Because I couldn't find heteroskedasticity and autocorrelation robust variances with lme4, let's
## read in these more conservative CIs from stata to adjust
Fig2B.1 <- tidy(MixedMod_Rich) %>%
filter(term == "log(rich)")
Fig2B.2 <- tidy(MixedMod_RichEven) %>%
filter(term == "log(rich)")
Fig2B.3 <- tidy(MixedMod_Simpson) %>%
filter(term == "log(simpson)")
Fig2B.1$conf.low <- .0049797
Fig2B.1$conf.high <- .7535313
Fig2B.2$conf.low <- -.0117337
Fig2B.2$conf.high <- .8204197
Fig2B.3$conf.low <- -.0855739
Fig2B.3$conf.high <- .2348401
################################################
## Table S2
#######################################
etable(MainMod_Rich, MainMod_RichEven, MainMod_RichLag, MainMod_RichEvenLag, MainMod_Simpson,
coefstat = "se")
etable(MainMod_Rich, MainMod_RichEven, MainMod_RichLag, MainMod_RichEvenLag, MainMod_Simpson,
coefstat = "confint")
#esttex(MainMod_Rich, MainMod_RichEven, MainMod_RichLag, MainMod_RichEvenLag, MainMod_Simpson,
#      coefstat = c("se", "confint"))
################################################
## Table ?? FOR TRADITIOL RESULTS
#######################################
######################################
## PLOTTING YEAH! ####
###############################
## Master Palette
cbPalette <- c("#999999", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7", "gray1", "red")
################################################
## Plot Figure 2A
# Prep Data
Fig2A.1 <- tidy(MainMod_Rich)
Fig2A.2 <- tidy(MainMod_RichEven) %>%
filter(term == "log(rich)")
Fig2A.3 <- tidy(MainMod_Simpson)
Fig2A.data <-  bind_rows(
Fig2A.1 %>% mutate(reg = "Species Richness"),
Fig2A.2 %>% mutate(reg = "Species Richness controlling for Evenness"),
Fig2A.3 %>% mutate(reg = "Simpson's Diversity") )
Fig2A.data$term = factor(Fig2A.data$term,
levels=c("log(rich)",
"log(simpson)",
"ihs(even)"))
# Plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discr5ete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
)
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discr5ete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
################################################
## Plot Figure 2B
Fig2B.data <-  bind_rows(
Fig2B.1 %>% mutate(reg = "Species Richness"),
Fig2B.2 %>% mutate(reg = "Species Richness controlling for Evenness"),
Fig2B.3 %>% mutate(reg = "Simpson's Diversity") )
Fig2B.data$term = factor(Fig2B.data$term,
levels=c("log(rich)",
"log(simpson)",
"ihs(even)"))
# Plot
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Traditional Ecological Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2B.plot
#################################
######## COMBINE
plot_grid(Fig2A , Fig.2B )
common.ylab = ylab("Estimated effect size")  #Estimated % Change in Productivity from a 1% Change in Diversity
plot_grid(Fig2A  + common.ylab,
Fig.2B + common.ylab)
common.ylab = ylab("Estimated effect size")  #Estimated % Change in Productivity from a 1% Change in Diversity
plot_grid(Fig2A.plot  + common.ylab,
Fig2B.plot + common.ylab)
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discr5ete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
Fig2A.plot <- Fig2A.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(7,9,4,8)]) +
theme_classic() +
theme(legend.position = c(0.6, 0.77),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .8) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Main Study Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2A.plot
################################################
## Plot Figure 2B
Fig2B.data <-  bind_rows(
Fig2B.1 %>% mutate(reg = "Species Richness"),
Fig2B.2 %>% mutate(reg = "Species Richness controlling for Evenness"),
Fig2B.3 %>% mutate(reg = "Simpson's Diversity") )
Fig2B.data$term = factor(Fig2B.data$term,
levels=c("log(rich)",
"log(simpson)",
"ihs(even)"))
# Plot
Fig2B.plot <- Fig2B.data %>%
ggplot(aes(x=term, y=estimate, ymin = conf.low, ymax = conf.high, colour = term)) +
geom_pointrange(aes(col = reg), size = 1.5, position = position_dodge(width = 0.5)) +
scale_colour_discrete() +
scale_color_manual(values=cbPalette[c(8,3,10)]) +
theme_classic() +
theme(legend.position = c(.5, 0.3),
legend.title = element_blank(),
legend.text  = element_text(size=14),
legend.background = element_rect(size=0.5,
linetype="solid",
colour ="black" ),
axis.text=element_text(size=22),
axis.title=element_text(size=20, face="bold"),
axis.title.x = element_text(size=20),
axis.title.y = element_text(size=16),
axis.text.x = element_text(size = 16),
axis.text.y = element_text(size = 16),
plot.title = element_text(size = 25, face = "bold", hjust = 0.5) ) +
geom_hline(yintercept = 0, col = "black") +
ylim(-.7, .85) +
scale_x_discrete(labels = c("Species Richness", "Simpson's Diversity")) +
scale_y_continuous(limits=c(-.8, .85),
breaks = c(-.8, -.6, -.4, -.2, 0, .2, .4, .6, .8)
) %>%
labs(title = "Traditional Ecological Design",
caption = "", x = "Variable", y = "Estimated effect size"
)
Fig2B.plot
common.ylab = ylab("Estimated effect size")  #Estimated % Change in Productivity from a 1% Change in Diversity
plot_grid(Fig2A.plot  + common.ylab,
Fig2B.plot + common.ylab)
MainMod_Rich
MainMod_RichLagDep  <- feols(log(live_mass) ~ log(rich) + log(laggedlive_mass) | site.by.yeardummy, comb)
MainMod_LagLiveMass  <- feols(log(live_mass) ~ log(rich) + log(laggedlive_mass) | site.by.yeardummy, comb)
View(MainMod_LagLiveMass)
tidy(MainMod_LagLiveMass)
help(feols)
MainMod_LagLiveMass  <- feols(log(live_mass) ~ log(rich) + log(laggedlive_mass) | site.by.yeardummy, comb, cluster =newplotid)
MainMod_LagLiveMass  <- feols(log(live_mass) ~ log(rich) + log(laggedlive_mass) | site.by.yeardummy, comb, cluster = "newplotid")
tidy(MainMod_LagLiveMass)
summary(MainMode_LagLiveMass)
summary(MainMod_LagLiveMass)
summary(MainMode_LagLiveMass, cluster = "newplotid")
summary(MainMod
_LagLiveMass, cluster = "newplotid")
summary(MainMod_LagLiveMass, cluster = "newplotid")
View(MainMod_LagLiveMass)
View(MainMod_LagLiveMass)
View(MainMod_Rich)
MainMod_LagLiveMass$call$cluster
MainMod_Rich$call$cluster
se(MainMod_Rich)
se(MainMod_LagLiveMass)
se(MainMod_LagLiveMass, cluster = "newplotid")
confint(MainMod_LagLiveMass)
confint(MainMod_LagLiveMass, cluster = "newplotid")
tidy = function(model, ...) {
if (attributes(model)$class == "felm") {
data = cbind.data.frame(term = names(coef(model)),
coef(summary(model, robust= T)),
confint(model))
names(data) = c("term","estimate","std.error", "statistic","p.value","conf.low","conf.high")
} else if (attributes(model)$class == "fixest") {
if (is.null(model$call$cluster)) {
data = cbind.data.frame(term = names(coef(model)),
coef(summary(model)),
se(model),
confint(model))
} else {
data = cbind.data.frame(term = names(coef(model)),
coef(summary(model)),
se(model, cluster = model$call$cluster),
confint(model, cluster = model$call$cluster))
}
names(data) = c("term","estimate","std.error","conf.low","conf.high")
} else if ((attributes(model)$class == "lmerMod") || (attributes(model)$class == "lme4")) {
sumdat <- summary(model)
data = cbind.data.frame(term = sumdat$vcov@Dimnames[[2]],
coef(sumdat),
confint(model, parm = sumdat$vcov@Dimnames[[2]]))
names(data) = c("term","estimate","std.error", "statistic","conf.low","conf.high")
}
return(data)
}
MainMod_LagLiveMass  <- feols(log(live_mass) ~ log(rich) + log(laggedlive_mass) | site.by.yeardummy, comb, cluster = "newplotid")
tidy(MainMod_LagLiveMass)
MainMod_MechBlocking <- feols(log(live_mass) ~ log(rich) + ihs(even) + log(ground_par) | newplotid + site.by.yeardummy, comb)
MainMod_MechBlocking <- feols(log(live_mass) ~ log(rich) + ihs(even) + log(Ground_PAR) | newplotid + site.by.yeardummy, comb)
tidy(MainMod_MechBlocking)
MainMod_IVRevCaus <- feols(log(live_mass) ~ | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
MainMod_IVRevCaus <- feols(log(live_mass) | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
MainMod_IVRevCaus <- feols(log(live_mass) ~ 1 | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
summary(comb$avg.trt.neigh.rich.within.block)
MainMod_IVRevCaus <- feols(fml = log(live_mass) ~ 1 | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
MainMod_IVRevCaus <- feols(fml = log(live_mass) | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
MainMod_IVRevCaus <- feols(fml = log(live_mass) ~ | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
MainMod_IVRevCaus <- feols(log(live_mass) ~ 0 | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
MainMod_IVRevCaus <- feols(log(live_mass) ~ log(rich) | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block), comb)
MainMod_IVRevCaus <- feols(log(live_mass) ~ log(rich) | newplotid + site.by.yeardummy , comb)
View(MainMod_IVRevCaus)
MainMod_IVRevCaus <- feols(log(live_mass) ~ ihs(even) | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block) , comb)
summary(comb$rich)
summary(comb$avg.trt.neigh.rich.within.block)
MainMod_IVRevCaus <- feols(log(live_mass) ~ ihs(even) | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block) , comb)
traceback()
View(feols)
help("complete.cases")
complete.cases(live_mass, even, newplotid , data=comb)
iv_comb <- as.data.frame(comb)
iv_comb <- ml_comb[,viv]
viv <- "live_mass rich newplotid site.by.yeardummy avg.trt.neigh.rich.within.block"
iv_comb <- as.data.frame(comb)
iv_comb <- iv_comb[,viv]
iv_comb <- iv_comb[complete.cases(iv_comb),]
iv_comb <- as.data.frame(comb)
viv <- unlist(strsplit("live_mass rich newplotid site.by.yeardummy avg.trt.neigh.rich.within.block"," "))
iv_comb <- as.data.frame(comb)
iv_comb <- iv_comb[,viv]
iv_comb <- iv_comb[complete.cases(iv_comb),]
MainMod_IVRevCaus <- feols(log(live_mass) ~ 1 | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block) , iv_comb)
summary(iv_comb$rich)
summary(iv_comb$avg.trt.neigh.rich.within.block)
MainMod_IVRevCaus <- feols(log(live_mass) ~ 0 | newplotid + site.by.yeardummy | log(rich) ~ log(avg.trt.neigh.rich.within.block) , iv_comb)
MainMod_IVRevCaus <- feols(log(live_mass) ~ 0 | newplotid + site.by.yeardummy | log(rich) ~ avg.trt.neigh.rich.within.block, iv_comb)
MainMod_IVRevCaus <- feols(live_mass ~ 0 | newplotid + site.by.yeardummy | rich ~ avg.trt.neigh.rich.within.block, iv_comb)
MainMod_IVRevCaus <- feols(live_mass ~ 1 | newplotid + site.by.yeardummy | rich ~ avg.trt.neigh.rich.within.block, iv_comb)
packageVersion(fixest)
install.packages("fixest")
install.packages("fixest")
install.packages("fixest")
package_version(fixest)
package_version("fixest")
packageVersion("fixest")
library(fixest)
install.packages("fixest")
detach("package:fixest", unload = TRUE)
install.packages("fixest")
